# Gemini E-Book2PDF 프로젝트 메모

### 프로젝트 개요
이 프로젝트는 사용자가 Yes24 Crema 뷰어와 같은 전자책 프로그램의 화면을 캡처하여 PDF로 변환할 수 있도록 돕는 GUI 자동화 스크립트다. 사용자는 마우스 클릭만으로 모든 설정을 완료할 수 있다.

### 사이트 계층 구조 (파일 구조)
```
E-Book2PDF/
├── .git/
├── .gemini/
│   └── gemini.md       # 나(Gemini)를 위한 유지보수용 메모
├── screenshots/        # 캡처된 이미지가 저장되는 폴더 (자동 생성)
├── .gitignore
├── get_mouse_coords.py # (보조) 마우스 좌표 획득용 헬퍼 스크립트
├── main.py             # (핵심) 자동 캡처 및 PDF 변환 실행 스크립트
├── README.md           # (문서) 사용자를 위한 안내서
└── requirements.txt    # Python 라이브러리 의존성 목록
```

### 핵심 로직 및 라이브러리
1.  **`pyautogui`**: GUI 자동화의 핵심.
    - `pyautogui.screenshot()`: 지정된 영역의 화면을 캡처하여 이미지 파일로 저장한다.
    - `pyautogui.click()`: 지정된 좌표를 클릭하여 페이지를 넘긴다.
2.  **`pynput`**: 사용자 입력(마우스 클릭)을 받기 위해 사용.
    - `pynput.mouse.Listener`: `main.py` 실행 중 사용자의 마우스 클릭 이벤트를 감지하여 좌표를 프로그램에 전달한다. 이 덕분에 사용자가 좌표를 수동으로 입력할 필요가 없다.
3.  **`Pillow` (PIL)**: 이미지 처리 및 PDF 생성을 담당.
    - `Image.open()`: 캡처된 PNG 파일들을 연다.
    - `Image.save()`: 열린 이미지들을 `save_all=True`와 `append_images` 옵션을 사용하여 단일 PDF 파일로 묶어 저장한다. `convert('RGB')`를 사용하여 호환성 문제를 예방했다.

### 미래의 나에게 남기는 유지보수 가이드
- **페이지 넘김 딜레이**: `main.py`의 `time.sleep(1.5)` 값은 페이지가 넘어가는 시간을 기다리기 위한 것이다. 만약 저사양 컴퓨터에서 페이지 로딩이 느리다면 이 값을 `2.0`이나 `2.5` 정도로 늘려야 할 수 있다.
- **좌표 오류**: 사용자가 캡처 영역을 잘못 설정하는 경우(예: 우측 하단을 좌측 상단보다 먼저 클릭)를 대비해 간단한 오류 처리 로직을 `main()` 함수에 추가해두었다. 만약 다른 좌표 관련 문제가 발생하면 이 부분을 확인하자.
- **E-Book 뷰어 업데이트**: 만약 Yes24 뷰어 등 타겟 프로그램의 UI가 업데이트되어 페이지 넘김 버튼 위치가 바뀌어도, 우리 프로그램은 사용자가 직접 클릭해서 위치를 지정하므로 코드 수정 없이 계속 사용할 수 있다. 이는 큰 장점이다.
- **고해상도 모니터(HiDPI) 문제**: macOS의 Retina 디스플레이 같은 고해상도 환경에서는 논리적 좌표와 실제 픽셀 좌표가 다를 수 있다. `pyautogui`는 대부분 이를 자동으로 처리하지만, 만약 캡처 영역이 이상하게 잘린다면 이 문제를 의심해봐야 한다. 현재는 별도 처리를 하지 않았다.

### 개발 워크플로우 기록
1.  `requirements.txt`, `.gitignore` 등 기본 환경 설정.
2.  좌표 획득 헬퍼 `get_mouse_coords.py` 개발.
3.  사용자 요청에 따라, 좌표를 직접 입력하는 방식 대신 `pynput`을 이용해 마우스 클릭으로 입력받는 `main.py` 개발.
4.  캡처 완료 후 `Pillow` 라이브러리를 사용해 이미지들을 PDF로 병합하는 기능 추가.
5.  사용자 및 유지보수를 위한 문서 작성.

이 메모가 미래의 유지보수 작업을 더 쉽게 만들어주길 바란다.
